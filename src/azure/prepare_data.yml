$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
name: prepare_data
display_name: Prepare data
version: 1
type: command

inputs:
  raw_data: 
    type: uri_folder
  max_series:
    type: integer
    optional: true
outputs:
  data:
    type: uri_file
  ids:
    type: uri_file
  hierarchy_config:
    type: uri_file

code: ../../
environment: azureml:forecast-env@latest

command: >-
  python -m src.azure.prepare_data
  --input ${{inputs.raw_data}} 
  --output-data ${{outputs.data}}
  --output-ids ${{outputs.ids}}
  --output-hierarchy-config ${{outputs.hierarchy_config}}
  $[[--max-series ${{inputs.max_series}}]]
